<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>Âá∫Â†¥ËÄÖË™øÊüª - Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºöÂåóÊµ∑ÈÅì‰∫àÈÅ∏</title>
    
    <!-- note.comÊúÄÈÅ©Âåñ„É°„Çø„Çø„Ç∞ -->
    <meta property="og:title" content="üè∏ Âá∫Â†¥ËÄÖË™øÊüª" />
    <meta property="og:description" content="Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºöÂåóÊµ∑ÈÅì‰∫àÈÅ∏„ÅÆÂèÇÂä†Â∏åÊúõË™øÊüª„Éï„Ç©„Éº„É†„ÄÇÈ´òÊ†°1„Éª2Âπ¥ÁîüÂØæË±°„ÄÅ8„Ç´„ÉÜ„Ç¥„É™„ÉºË©≥Á¥∞ÈõÜË®àÊ©üËÉΩÊê≠Ëºâ„ÄÇ" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºö" />
    <meta name="description" content="Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºöÂåóÊµ∑ÈÅì‰∫àÈÅ∏„ÅÆÂèÇÂä†Â∏åÊúõË™øÊüª„Éï„Ç©„Éº„É†„ÄÇÂêÑÂ≠¶Ê†°„ÅÆÂèÇÂä†‰∫àÂÆö‰∫∫Êï∞„ÇíÂÖ•Âäõ„Åó„ÄÅ„É™„Ç¢„É´„Çø„Ç§„É†Áµ±Ë®à„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ" />
    <meta name="keywords" content="„Éê„Éâ„Éü„É≥„Éà„É≥,È´òÊ†°Áîü,ÈÅ∏ÊäúÂ§ß‰ºö,ÂåóÊµ∑ÈÅì,Âá∫Â†¥ËÄÖË™øÊüª,ÂèÇÂä†Áî≥Ëæº" />
    
    <!-- note.comË°®Á§∫ÊúÄÈÅ©Âåñ -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="üè∏ Âá∫Â†¥ËÄÖË™øÊüª" />
    <meta name="twitter:description" content="Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºöÂåóÊµ∑ÈÅì‰∫àÈÅ∏„ÅÆÂèÇÂä†Â∏åÊúõË™øÊüª" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic UI', 'Meiryo UI', '„É°„Ç§„É™„Ç™', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 5px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 5px;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .main-title {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 12px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .info-badge {
            display: inline-block;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 10px;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            backdrop-filter: blur(10px);
        }

        .tab {
            flex: 1;
            padding: 16px 12px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #666;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            min-height: 50px;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transform: translateY(-1px);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin: 20px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1rem;
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 16px;
            background: white;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            touch-action: manipulation;
        }

        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
            outline: none;
            transform: translateY(-1px);
        }

        select.form-control {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 14px center;
            background-repeat: no-repeat;
            background-size: 18px;
            padding-right: 50px;
        }

        .participants-section {
            margin-top: 30px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid #667eea;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .participants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
            margin-bottom: 25px;
        }

        .participant-card {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 18px;
            border-radius: 12px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .participant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .participant-card label {
            color: #495057;
            font-size: 0.95rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 25px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn:hover, .btn:active {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #5a6fd8, #6a42a8);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        /* Áµ±Ë®àË°®Á§∫„ÅÆÈ´òÂ∫¶„Å™„Çπ„Çø„Ç§„É´ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .stats-section {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            border-left: 6px solid #667eea;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .stats-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .stats-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 18px;
            padding-bottom: 10px;
            border-bottom: 2px solid #dee2e6;
            position: relative;
        }

        .stats-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 1px;
        }

        .stats-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e9ecef;
            transition: all 0.2s ease;
        }

        .stats-item:last-child {
            border-bottom: none;
        }

        .stats-item:hover {
            background: rgba(102, 126, 234, 0.05);
            margin: 0 -10px;
            padding: 12px 10px;
            border-radius: 8px;
        }

        .stats-label {
            font-size: 0.95rem;
            color: #495057;
            flex: 1;
            font-weight: 500;
        }

        .stats-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            text-align: right;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .schools-list {
            background: white;
            border-radius: 12px;
            border: 1px solid #e0e6ed;
            margin-top: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .school-item {
            padding: 18px 25px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .school-item:last-child {
            border-bottom: none;
        }

        .school-item:hover {
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
        }

        .school-name {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.05rem;
        }

        .school-details {
            display: flex;
            gap: 18px;
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .admin-section {
            background: linear-gradient(145deg, #fff3cd, #ffeaa7);
            padding: 25px;
            border-radius: 12px;
            border-left: 5px solid #ffc107;
            margin-top: 25px;
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.2);
        }

        .admin-controls {
            display: none;
        }

        body.admin-mode .admin-controls {
            display: block;
        }

        .admin-btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .message {
            padding: 18px 25px;
            border-radius: 12px;
            margin: 20px 0;
            font-weight: 500;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .message.success {
            background: linear-gradient(145deg, #d4edda, #c3e6cb);
            color: #155724;
            border-left: 5px solid #28a745;
        }

        .message.error {
            background: linear-gradient(145deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border-left: 5px solid #dc3545;
        }

        .message.info {
            background: linear-gradient(145deg, #d1ecf1, #bee5eb);
            color: #0c5460;
            border-left: 5px solid #17a2b8;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥„ÅÆÂº∑Âåñ */
        @media (max-width: 768px) {
            .container {
                padding: 2px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .main-title {
                font-size: 1.6rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .tab {
                padding: 14px 8px;
                font-size: 0.85rem;
            }
            
            .tab-content {
                padding: 20px 15px;
            }
            
            .participants-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .admin-btn-group {
                grid-template-columns: 1fr;
            }

            .school-details {
                flex-direction: column;
                gap: 8px;
                text-align: right;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 2px;
            }
            
            .main-title {
                font-size: 1.4rem;
            }
            
            .btn {
                padding: 20px 25px;
                font-size: 1.1rem;
            }

            input[type="text"],
            input[type="email"],
            select {
                padding: 16px 18px;
                font-size: 16px;
            }

            .stats-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .stats-value {
                align-self: flex-end;
            }
        }

        /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂäπÊûú„ÅÆËøΩÂä† */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content {
            animation: fadeInUp 0.4s ease-out;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .btn:active {
            animation: pulse 0.3s ease;
        }

        /* „Éó„É™„É≥„ÉàÊúÄÈÅ©Âåñ */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                max-width: none;
                margin: 0;
                padding: 0;
            }
            
            .tabs,
            .admin-section,
            .btn {
                display: none;
            }
            
            .tab-content {
                display: block !important;
                background: white;
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }

        /* „Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£„ÅÆÂêë‰∏ä */
        .btn:focus,
        .tab:focus,
        .form-control:focus {
            outline: 3px solid #667eea;
            outline-offset: 2px;
        }

        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞Áä∂ÊÖã„ÅÆ„Çπ„Çø„Ç§„É´ */
        .loading {
            position: relative;
            opacity: 0.7;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 25px;
            height: 25px;
            margin: -12.5px 0 0 -12.5px;
            border: 3px solid #667eea;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">üè∏ Âá∫Â†¥ËÄÖË™øÊüª</h1>
            <p class="subtitle">Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºöÂåóÊµ∑ÈÅì‰∫àÈÅ∏</p>
            <div class="info-badge">È´òÊ†°1„Éª2Âπ¥ÁîüÂØæË±° | 8„Ç´„ÉÜ„Ç¥„É™„ÉºË©≥Á¥∞ÈõÜË®à</div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="application">üìù ÂèÇÂä†Áî≥Ëæº„Åø</button>
            <button class="tab" data-tab="dashboard">üìä ÂèÇÂä†Áä∂Ê≥Å</button>
            <button class="tab" data-tab="admin">üîê ÁÆ°ÁêÜËÄÖ</button>
        </div>

        <!-- ÂèÇÂä†Áî≥Ëæº„Åø„Çø„Éñ -->
        <div id="application" class="tab-content active">
            <form id="applicationForm">
                <div class="form-group">
                    <label for="schoolName">Â≠¶Ê†°Âêç *</label>
                    <input type="text" id="schoolName" name="schoolName" class="form-control" placeholder="‚óã‚óãÈ´òÁ≠âÂ≠¶Ê†°" required>
                </div>
                
                <div class="form-group">
                    <label for="teacherName">ÊãÖÂΩìËÄÖÂêç *</label>
                    <input type="text" id="teacherName" name="teacherName" class="form-control" placeholder="Â±±Áî∞ Â§™ÈÉé" required>
                </div>
                
                <div class="form-group">
                    <label for="email">ÈÄ£Áµ°ÂÖà„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ *</label>
                    <input type="email" id="email" name="email" class="form-control" placeholder="example@school.ed.jp" required>
                </div>

                <div class="participants-section">
                    <div class="section-title">üè∏ ÂèÇÂä†ËÄÖÊï∞ÂÖ•Âäõ</div>
                    <div class="participants-grid">
                        <div class="participant-card">
                            <label for="first_male_singles">1Âπ¥Áî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</label>
                            <select id="first_male_singles" name="first_male_singles" class="form-control">
                                <option value="0">0Âêç</option>
                                <option value="1">1Âêç</option>
                                <option value="2">2Âêç</option>
                                <option value="3">3Âêç</option>
                                <option value="4">4Âêç</option>
                                <option value="5">5Âêç</option>
                                <option value="6">6Âêç</option>
                                <option value="7">7Âêç</option>
                                <option value="8">8Âêç</option>
                                <option value="9">9Âêç</option>
                                <option value="10">10Âêç</option>
                                <option value="11">11Âêç</option>
                                <option value="12">12Âêç</option>
                                <option value="13">13Âêç</option>
                                <option value="14">14Âêç</option>
                                <option value="15">15Âêç</option>
                                <option value="16">16Âêç</option>
                                <option value="17">17Âêç</option>
                                <option value="18">18Âêç</option>
                                <option value="19">19Âêç</option>
                                <option value="20">20Âêç</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="first_female_doubles">1Âπ¥Â•≥Â≠ê„ÉÄ„Éñ„É´„Çπ</label>
                            <select id="first_female_doubles" name="first_female_doubles" class="form-control">
                                <option value="0">0ÁµÑ</option>
                                <option value="1">1ÁµÑ</option>
                                <option value="2">2ÁµÑ</option>
                                <option value="3">3ÁµÑ</option>
                                <option value="4">4ÁµÑ</option>
                                <option value="5">5ÁµÑ</option>
                                <option value="6">6ÁµÑ</option>
                                <option value="7">7ÁµÑ</option>
                                <option value="8">8ÁµÑ</option>
                                <option value="9">9ÁµÑ</option>
                                <option value="10">10ÁµÑ</option>
                                <option value="11">11ÁµÑ</option>
                                <option value="12">12ÁµÑ</option>
                                <option value="13">13ÁµÑ</option>
                                <option value="14">14ÁµÑ</option>
                                <option value="15">15ÁµÑ</option>
                                <option value="16">16ÁµÑ</option>
                                <option value="17">17ÁµÑ</option>
                                <option value="18">18ÁµÑ</option>
                                <option value="19">19ÁµÑ</option>
                                <option value="20">20ÁµÑ</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="first_female_singles">1Âπ¥Â•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</label>
                            <select id="first_female_singles" name="first_female_singles" class="form-control">
                                <option value="0">0Âêç</option>
                                <option value="1">1Âêç</option>
                                <option value="2">2Âêç</option>
                                <option value="3">3Âêç</option>
                                <option value="4">4Âêç</option>
                                <option value="5">5Âêç</option>
                                <option value="6">6Âêç</option>
                                <option value="7">7Âêç</option>
                                <option value="8">8Âêç</option>
                                <option value="9">9Âêç</option>
                                <option value="10">10Âêç</option>
                                <option value="11">11Âêç</option>
                                <option value="12">12Âêç</option>
                                <option value="13">13Âêç</option>
                                <option value="14">14Âêç</option>
                                <option value="15">15Âêç</option>
                                <option value="16">16Âêç</option>
                                <option value="17">17Âêç</option>
                                <option value="18">18Âêç</option>
                                <option value="19">19Âêç</option>
                                <option value="20">20Âêç</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="first_male_doubles">1Âπ¥Áî∑Â≠ê„ÉÄ„Éñ„É´„Çπ</label>
                            <select id="first_male_doubles" name="first_male_doubles" class="form-control">
                                <option value="0">0ÁµÑ</option>
                                <option value="1">1ÁµÑ</option>
                                <option value="2">2ÁµÑ</option>
                                <option value="3">3ÁµÑ</option>
                                <option value="4">4ÁµÑ</option>
                                <option value="5">5ÁµÑ</option>
                                <option value="6">6ÁµÑ</option>
                                <option value="7">7ÁµÑ</option>
                                <option value="8">8ÁµÑ</option>
                                <option value="9">9ÁµÑ</option>
                                <option value="10">10ÁµÑ</option>
                                <option value="11">11ÁµÑ</option>
                                <option value="12">12ÁµÑ</option>
                                <option value="13">13ÁµÑ</option>
                                <option value="14">14ÁµÑ</option>
                                <option value="15">15ÁµÑ</option>
                                <option value="16">16ÁµÑ</option>
                                <option value="17">17ÁµÑ</option>
                                <option value="18">18ÁµÑ</option>
                                <option value="19">19ÁµÑ</option>
                                <option value="20">20ÁµÑ</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="second_male_singles">2Âπ¥Áî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</label>
                            <select id="second_male_singles" name="second_male_singles" class="form-control">
                                <option value="0">0Âêç</option>
                                <option value="1">1Âêç</option>
                                <option value="2">2Âêç</option>
                                <option value="3">3Âêç</option>
                                <option value="4">4Âêç</option>
                                <option value="5">5Âêç</option>
                                <option value="6">6Âêç</option>
                                <option value="7">7Âêç</option>
                                <option value="8">8Âêç</option>
                                <option value="9">9Âêç</option>
                                <option value="10">10Âêç</option>
                                <option value="11">11Âêç</option>
                                <option value="12">12Âêç</option>
                                <option value="13">13Âêç</option>
                                <option value="14">14Âêç</option>
                                <option value="15">15Âêç</option>
                                <option value="16">16Âêç</option>
                                <option value="17">17Âêç</option>
                                <option value="18">18Âêç</option>
                                <option value="19">19Âêç</option>
                                <option value="20">20Âêç</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="second_female_doubles">2Âπ¥Â•≥Â≠ê„ÉÄ„Éñ„É´„Çπ</label>
                            <select id="second_female_doubles" name="second_female_doubles" class="form-control">
                                <option value="0">0ÁµÑ</option>
                                <option value="1">1ÁµÑ</option>
                                <option value="2">2ÁµÑ</option>
                                <option value="3">3ÁµÑ</option>
                                <option value="4">4ÁµÑ</option>
                                <option value="5">5ÁµÑ</option>
                                <option value="6">6ÁµÑ</option>
                                <option value="7">7ÁµÑ</option>
                                <option value="8">8ÁµÑ</option>
                                <option value="9">9ÁµÑ</option>
                                <option value="10">10ÁµÑ</option>
                                <option value="11">11ÁµÑ</option>
                                <option value="12">12ÁµÑ</option>
                                <option value="13">13ÁµÑ</option>
                                <option value="14">14ÁµÑ</option>
                                <option value="15">15ÁµÑ</option>
                                <option value="16">16ÁµÑ</option>
                                <option value="17">17ÁµÑ</option>
                                <option value="18">18ÁµÑ</option>
                                <option value="19">19ÁµÑ</option>
                                <option value="20">20ÁµÑ</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="second_female_singles">2Âπ¥Â•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</label>
                            <select id="second_female_singles" name="second_female_singles" class="form-control">
                                <option value="0">0Âêç</option>
                                <option value="1">1Âêç</option>
                                <option value="2">2Âêç</option>
                                <option value="3">3Âêç</option>
                                <option value="4">4Âêç</option>
                                <option value="5">5Âêç</option>
                                <option value="6">6Âêç</option>
                                <option value="7">7Âêç</option>
                                <option value="8">8Âêç</option>
                                <option value="9">9Âêç</option>
                                <option value="10">10Âêç</option>
                                <option value="11">11Âêç</option>
                                <option value="12">12Âêç</option>
                                <option value="13">13Âêç</option>
                                <option value="14">14Âêç</option>
                                <option value="15">15Âêç</option>
                                <option value="16">16Âêç</option>
                                <option value="17">17Âêç</option>
                                <option value="18">18Âêç</option>
                                <option value="19">19Âêç</option>
                                <option value="20">20Âêç</option>
                            </select>
                        </div>
                        
                        <div class="participant-card">
                            <label for="second_male_doubles">2Âπ¥Áî∑Â≠ê„ÉÄ„Éñ„É´„Çπ</label>
                            <select id="second_male_doubles" name="second_male_doubles" class="form-control">
                                <option value="0">0ÁµÑ</option>
                                <option value="1">1ÁµÑ</option>
                                <option value="2">2ÁµÑ</option>
                                <option value="3">3ÁµÑ</option>
                                <option value="4">4ÁµÑ</option>
                                <option value="5">5ÁµÑ</option>
                                <option value="6">6ÁµÑ</option>
                                <option value="7">7ÁµÑ</option>
                                <option value="8">8ÁµÑ</option>
                                <option value="9">9ÁµÑ</option>
                                <option value="10">10ÁµÑ</option>
                                <option value="11">11ÁµÑ</option>
                                <option value="12">12ÁµÑ</option>
                                <option value="13">13ÁµÑ</option>
                                <option value="14">14ÁµÑ</option>
                                <option value="15">15ÁµÑ</option>
                                <option value="16">16ÁµÑ</option>
                                <option value="17">17ÁµÑ</option>
                                <option value="18">18ÁµÑ</option>
                                <option value="19">19ÁµÑ</option>
                                <option value="20">20ÁµÑ</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn">üì§ Ë™øÊüªÂõûÁ≠î„ÇíÈÄÅ‰ø°</button>
            </form>
        </div>

        <!-- ÂèÇÂä†Áä∂Ê≥Å„Çø„Éñ -->
        <div id="dashboard" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px;">
                <h2 style="color: #2c3e50; margin: 0; font-size: 1.4rem;">üìä ÂèÇÂä†Áä∂Ê≥ÅÂàÜÊûê</h2>
                <div class="admin-controls">
                    <button onclick="exportCSV()" class="btn" style="width: auto; margin: 0; padding: 12px 24px; font-size: 1rem;">
                        üìÅ CSVÂá∫Âäõ
                    </button>
                </div>
            </div>

            <div id="statistics"></div>
            <div id="applicantsList"></div>
        </div>

        <!-- ÁÆ°ÁêÜËÄÖ„Çø„Éñ -->
        <div id="admin" class="tab-content">
            <div class="admin-section">
                <div class="section-title">üîê ÁÆ°ÁêÜËÄÖÊ©üËÉΩ</div>
                <div class="form-group">
                    <label for="adminPassword">ÁÆ°ÁêÜËÄÖ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <input type="password" id="adminPassword" class="form-control" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ">
                </div>
                <button type="button" class="btn" onclick="adminLogin()">üîì ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥</button>
                
                <div class="admin-controls" id="adminControls">
                    <div class="admin-btn-group">
                        <button type="button" class="btn" onclick="exportCSV()">üì• CSV„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                        <button type="button" class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è ÂÖ®„Éá„Éº„Çø„ÇØ„É™„Ç¢</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let applications = [];
        let isAdminMode = false;

        // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„ÅÆ„Ç≠„Éº
        const STORAGE_KEY = 'badminton_applications_survey_2024';

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('„Éê„Éâ„Éü„É≥„Éà„É≥Âá∫Â†¥ËÄÖË™øÊüª„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã');
            loadData();
            updateDashboard();
            setupEventListeners();
            enhanceSmartphoneSupport();
            console.log('„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü');
        });

        // „Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        function loadData() {
            try {
                const data = localStorage.getItem(STORAGE_KEY);
                applications = data ? JSON.parse(data) : [];
                console.log(`${applications.length}‰ª∂„ÅÆ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü`);
            } catch (error) {
                console.error('„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
                applications = [];
                showMessage('‚ö†Ô∏è „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ', 'error');
            }
        }

        // „Éá„Éº„Çø‰øùÂ≠ò
        function saveData() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(applications));
                console.log('„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü');
            } catch (error) {
                console.error('„Éá„Éº„Çø‰øùÂ≠ò„Ç®„É©„Éº:', error);
                showMessage('‚ö†Ô∏è „Éá„Éº„Çø„ÅÆ‰øùÂ≠ò‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ', 'error');
            }
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆË®≠ÂÆö
        function setupEventListeners() {
            // „Çø„Éñ„ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetTab = this.getAttribute('data-tab');
                    switchTab(targetTab);
                });
            });

            // „Éï„Ç©„Éº„É†ÈÄÅ‰ø°„Ç§„Éô„É≥„Éà
            document.getElementById('applicationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleFormSubmit(e);
            });

            console.log('„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆöÂÆå‰∫Ü');
        }

        // „Çø„ÉñÂàá„ÇäÊõø„Åà
        function switchTab(tabName) {
            console.log('„Çø„ÉñÂàá„ÇäÊõø„Åà:', tabName);
            
            // ÂÖ®„Å¶„ÅÆ„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ÊåáÂÆö„Åï„Çå„Åü„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Çø„Éñ„ÅÆÂ†¥Âêà„ÅØ„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
            if (tabName === 'dashboard') {
                updateDashboard();
            }
        }

        // „Éï„Ç©„Éº„É†ÈÄÅ‰ø°Âá¶ÁêÜ
        function handleFormSubmit(e) {
            console.log('„Éï„Ç©„Éº„É†ÈÄÅ‰ø°ÈñãÂßã');
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Áä∂ÊÖã„Å´Ë®≠ÂÆö
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'ÈÄÅ‰ø°‰∏≠...';
            submitBtn.classList.add('loading');
            
            try {
                const formData = new FormData(e.target);
                const data = {};
                
                // ÂøÖÈ†à„Éï„Ç£„Éº„É´„Éâ„ÅÆÊ§úË®º
                const requiredFields = ['schoolName', 'teacherName', 'email'];
                for (let field of requiredFields) {
                    const value = formData.get(field);
                    if (!value || value.trim() === '') {
                        throw new Error(`${getFieldLabel(field)}„ÅØÂøÖÈ†àÈ†ÖÁõÆ„Åß„Åô„ÄÇ`);
                    }
                    data[field] = value.trim();
                }
                
                // „É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÅÆÂΩ¢ÂºèÊ§úË®º
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(data.email)) {
                    throw new Error('Ê≠£„Åó„ÅÑ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                }
                
                // Êï∞ÂÄ§„Éï„Ç£„Éº„É´„Éâ„ÅÆÂá¶ÁêÜ
                const numberFields = [
                    'first_male_singles', 'first_male_doubles',
                    'first_female_singles', 'first_female_doubles',
                    'second_male_singles', 'second_male_doubles',
                    'second_female_singles', 'second_female_doubles'
                ];
                
                let totalParticipants = 0;
                for (let field of numberFields) {
                    let value = parseInt(formData.get(field)) || 0;
                    data[field] = value;
                    // „ÉÄ„Éñ„É´„Çπ„ÅØ1ÁµÑ=2‰∫∫„ÅßË®àÁÆó
                    if (field.includes('doubles')) {
                        totalParticipants += value * 2;
                    } else {
                        totalParticipants += value;
                    }
                }
                
                // ÂèÇÂä†ËÄÖÊï∞„ÅÆÊ§úË®º
                if (totalParticipants === 0) {
                    throw new Error('Â∞ë„Å™„Åè„Å®„ÇÇ1Âêç‰ª•‰∏ä„ÅÆÂèÇÂä†‰∫àÂÆöËÄÖ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                }
                
                // Êó¢Â≠òÁî≥Ëæº„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ
                const existingIndex = applications.findIndex(app => 
                    app.schoolName.toLowerCase() === data.schoolName.toLowerCase()
                );
                
                if (existingIndex !== -1) {
                    if (!confirm('„Åì„ÅÆÂ≠¶Ê†°„Åã„Çâ„ÅÆÂõûÁ≠î„ÅåÊó¢„Å´Â≠òÂú®„Åó„Åæ„Åô„ÄÇ„Éá„Éº„Çø„ÇíÊõ¥Êñ∞„Åó„Åæ„Åô„ÅãÔºü')) {
                        return;
                    }
                    applications[existingIndex] = { ...data, timestamp: new Date().toISOString() };
                    showMessage('‚úÖ Áî≥Ëæº„ÅøÊÉÖÂ†±„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„ÅüÔºÅ', 'success');
                } else {
                    applications.push({ ...data, timestamp: new Date().toISOString() });
                    showMessage('‚úÖ ÂèÇÂä†Áî≥Ëæº„Åø„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„ÅüÔºÅ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åôüéâ', 'success');
                }
                
                // „Éá„Éº„Çø‰øùÂ≠ò
                saveData();
                updateDashboard();
                
                // „Éï„Ç©„Éº„É†„É™„Çª„ÉÉ„Éà
                e.target.reset();
                
                // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Çø„Éñ„Å´Âàá„ÇäÊõø„Åà
                setTimeout(() => {
                    switchTab('dashboard');
                }, 2500);
                
                console.log('„Éï„Ç©„Éº„É†ÈÄÅ‰ø°ÂÆå‰∫Ü');
                
            } catch (error) {
                showMessage(`‚ùå „Ç®„É©„Éº: ${error.message}`, 'error');
                console.error('„Éï„Ç©„Éº„É†ÈÄÅ‰ø°„Ç®„É©„Éº:', error);
            } finally {
                // „É≠„Éº„Éá„Ç£„É≥„Ç∞Áä∂ÊÖã„ÇíËß£Èô§
                setTimeout(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.classList.remove('loading');
                }, 500);
            }
        }

        // „Éï„Ç£„Éº„É´„Éâ„É©„Éô„É´ÂèñÂæó
        function getFieldLabel(field) {
            const labels = {
                schoolName: 'Â≠¶Ê†°Âêç',
                teacherName: 'ÊãÖÂΩìËÄÖÂêç',
                email: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ'
            };
            return labels[field] || field;
        }

        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞Ôºà8„Ç´„ÉÜ„Ç¥„É™„ÉºË©≥Á¥∞ÈõÜË®àÊ©üËÉΩÔºâ
        function updateDashboard() {
            console.log('„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞ÈñãÂßã');
            const statisticsDiv = document.getElementById('statistics');
            const applicantsDiv = document.getElementById('applicantsList');
            
            if (!statisticsDiv || !applicantsDiv) {
                console.error('„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâË¶ÅÁ¥†„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            if (applications.length === 0) {
                statisticsDiv.innerHTML = `
                    <div class="message info">
                        <strong>üì¢ Ë™øÊüªÈñãÂßã</strong><br>
                        „Åæ„Å†ÂèÇÂä†Áî≥Ëæº„Åø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÂêÑÊ†°„Åã„Çâ„ÅÆÂõûÁ≠î„Çí„ÅäÂæÖ„Å°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
                    </div>
                `;
                applicantsDiv.innerHTML = '';
                return;
            }

            // Áµ±Ë®àË®àÁÆó
            const stats = calculateStatistics();
            
            // 5„Çª„ÇØ„Ç∑„Éß„É≥ÊßãÊàê„ÅÆË©≥Á¥∞Áµ±Ë®àË°®Á§∫Ôºà„Åì„Çå„Åæ„Åß„ÅÆÁ©ç„ÅøÈáç„Å≠Ôºâ
            statisticsDiv.innerHTML = `
                <div class="stats-grid">
                    <div class="stats-section">
                        <div class="stats-title">1Ô∏è‚É£ Âü∫Êú¨Áµ±Ë®à</div>
                        <div class="stats-item">
                            <span class="stats-label">ÂõûÁ≠îÂ≠¶Ê†°Êï∞</span>
                            <span class="stats-value">${stats.totalSchools}Ê†°</span>
                        </div>
                        <div class="stats-item">
                            <span class="stats-label">Á∑èÂèÇÂä†‰∫àÂÆöËÄÖÊï∞</span>
                            <span class="stats-value">${stats.totalParticipants}Âêç</span>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stats-title">2Ô∏è‚É£ Â≠¶Âπ¥Âà•ÈõÜË®à</div>
                        <div class="stats-item">
                            <span class="stats-label">1Âπ¥ÁîüÂèÇÂä†‰∫àÂÆöËÄÖÊï∞</span>
                            <span class="stats-value">${stats.firstYearTotal}Âêç</span>
                        </div>
                        <div class="stats-item">
                            <span class="stats-label">2Âπ¥ÁîüÂèÇÂä†‰∫àÂÆöËÄÖÊï∞</span>
                            <span class="stats-value">${stats.secondYearTotal}Âêç</span>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stats-title">3Ô∏è‚É£ ÊÄßÂà•ÈõÜË®à</div>
                        <div class="stats-item">
                            <span class="stats-label">Áî∑Â≠êÂèÇÂä†‰∫àÂÆöËÄÖÊï∞Ôºà1„Éª2Âπ¥ÂêàË®àÔºâ</span>
                            <span class="stats-value">${stats.maleTotal}Âêç</span>
                        </div>
                        <div class="stats-item">
                            <span class="stats-label">Â•≥Â≠êÂèÇÂä†‰∫àÂÆöËÄÖÊï∞Ôºà1„Éª2Âπ¥ÂêàË®àÔºâ</span>
                            <span class="stats-value">${stats.femaleTotal}Âêç</span>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stats-title">4Ô∏è‚É£ Á´∂ÊäÄÁ®ÆÁõÆÂà•ÈõÜË®à</div>
                        <div class="stats-item">
                            <span class="stats-label">„Ç∑„É≥„Ç∞„É´„ÇπÁ∑èÊï∞ÔºàÁî∑Â•≥„ÉªÂ≠¶Âπ¥ÂêàË®àÔºâ</span>
                            <span class="stats-value">${stats.singlesTotal}Âêç</span>
                        </div>
                        <div class="stats-item">
                            <span class="stats-label">„ÉÄ„Éñ„É´„ÇπÁ∑èÊï∞ÔºàÁî∑Â•≥„ÉªÂ≠¶Âπ¥ÂêàË®àÔºâ</span>
                            <span class="stats-value">${stats.doublesTotal}ÁµÑ</span>
                        </div>
                        <div class="stats-item">
                            <span class="stats-label">„ÉÄ„Éñ„É´„ÇπÂèÇÂä†ËÄÖÊï∞ÔºàÁµÑ√ó2ÂêçÔºâ</span>
                            <span class="stats-value">${stats.doublesTotal * 2}Âêç</span>
                        </div>
                    </div>

                    <div class="stats-section" style="grid-column: 1 / -1;">
                        <div class="stats-title">5Ô∏è‚É£ Ë©≥Á¥∞ÈõÜË®àÔºàÂÖ®8„Ç´„ÉÜ„Ç¥„É™„ÉºÔºâ</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px;">
                            <div class="stats-item">
                                <span class="stats-label">ü•á 1Âπ¥ÁîüÁî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</span>
                                <span class="stats-value">${stats.firstMaleSingles}Âêç</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">üèÜ 1Âπ¥ÁîüÁî∑Â≠ê„ÉÄ„Éñ„É´„Çπ</span>
                                <span class="stats-value">${stats.firstMaleDoubles}ÁµÑ</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">ü•á 1Âπ¥ÁîüÂ•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</span>
                                <span class="stats-value">${stats.firstFemaleSingles}Âêç</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">üèÜ 1Âπ¥ÁîüÂ•≥Â≠ê„ÉÄ„Éñ„É´„Çπ</span>
                                <span class="stats-value">${stats.firstFemaleDoubles}ÁµÑ</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">ü•á 2Âπ¥ÁîüÁî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</span>
                                <span class="stats-value">${stats.secondMaleSingles}Âêç</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">üèÜ 2Âπ¥ÁîüÁî∑Â≠ê„ÉÄ„Éñ„É´„Çπ</span>
                                <span class="stats-value">${stats.secondMaleDoubles}ÁµÑ</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">ü•á 2Âπ¥ÁîüÂ•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ</span>
                                <span class="stats-value">${stats.secondFemaleSingles}Âêç</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">üèÜ 2Âπ¥ÁîüÂ•≥Â≠ê„ÉÄ„Éñ„É´„Çπ</span>
                                <span class="stats-value">${stats.secondFemaleDoubles}ÁµÑ</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Â≠¶Ê†°Âà•‰∏ÄË¶ß„ÅÆË°®Á§∫ÔºàÂÄã‰∫∫ÊÉÖÂ†±‰øùË≠∑ÂØæÂøúÔºâ
            const sortedApplications = [...applications].sort((a, b) => a.schoolName.localeCompare(b.schoolName));
            
            applicantsDiv.innerHTML = `
                <div class="section-title">üìã ÂèÇÂä†Ê†°‰∏ÄË¶ß</div>
                <div class="schools-list">
                    ${sortedApplications.map(app => {
                        const schoolStats = calculateSchoolStats(app);
                        return `
                            <div class="school-item">
                                <div class="school-name">üè´ ${app.schoolName}</div>
                                <div class="school-details">
                                    <span>ü•á „Ç∑„É≥„Ç∞„É´„Çπ: ${schoolStats.singlesTotal}Âêç</span>
                                    <span>üèÜ „ÉÄ„Éñ„É´„Çπ: ${schoolStats.doublesTotal}ÁµÑ</span>
                                    <span><strong>üë• ÂêàË®à: ${schoolStats.totalPeople}Âêç</strong></span>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
            
            console.log('„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞ÂÆå‰∫Ü');
        }

        // Áµ±Ë®àË®àÁÆóÔºà8„Ç´„ÉÜ„Ç¥„É™„ÉºÂØæÂøúÔºâ
        function calculateStatistics() {
            const stats = {
                totalSchools: applications.length,
                totalParticipants: 0,
                firstYearTotal: 0,
                secondYearTotal: 0,
                maleTotal: 0,
                femaleTotal: 0,
                singlesTotal: 0,
                doublesTotal: 0,
                firstMaleSingles: 0,
                firstMaleDoubles: 0,
                firstFemaleSingles: 0,
                firstFemaleDoubles: 0,
                secondMaleSingles: 0,
                secondMaleDoubles: 0,
                secondFemaleSingles: 0,
                secondFemaleDoubles: 0
            };

            applications.forEach(app => {
                stats.firstMaleSingles += app.first_male_singles || 0;
                stats.firstMaleDoubles += app.first_male_doubles || 0;
                stats.firstFemaleSingles += app.first_female_singles || 0;
                stats.firstFemaleDoubles += app.first_female_doubles || 0;
                stats.secondMaleSingles += app.second_male_singles || 0;
                stats.secondMaleDoubles += app.second_male_doubles || 0;
                stats.secondFemaleSingles += app.second_female_singles || 0;
                stats.secondFemaleDoubles += app.second_female_doubles || 0;
            });

            // ‰∫∫Êï∞Ë®àÁÆóÔºà„ÉÄ„Éñ„É´„Çπ„ÅØ1ÁµÑ=2‰∫∫Ôºâ
            stats.firstYearTotal = stats.firstMaleSingles + (stats.firstMaleDoubles * 2) + stats.firstFemaleSingles + (stats.firstFemaleDoubles * 2);
            stats.secondYearTotal = stats.secondMaleSingles + (stats.secondMaleDoubles * 2) + stats.secondFemaleSingles + (stats.secondFemaleDoubles * 2);
            stats.maleTotal = stats.firstMaleSingles + (stats.firstMaleDoubles * 2) + stats.secondMaleSingles + (stats.secondMaleDoubles * 2);
            stats.femaleTotal = stats.firstFemaleSingles + (stats.firstFemaleDoubles * 2) + stats.secondFemaleSingles + (stats.secondFemaleDoubles * 2);
            stats.singlesTotal = stats.firstMaleSingles + stats.firstFemaleSingles + stats.secondMaleSingles + stats.secondFemaleSingles;
            stats.doublesTotal = stats.firstMaleDoubles + stats.firstFemaleDoubles + stats.secondMaleDoubles + stats.secondFemaleDoubles;
            stats.totalParticipants = stats.firstYearTotal + stats.secondYearTotal;

            return stats;
        }

        // Â≠¶Ê†°Âà•Áµ±Ë®àË®àÁÆó
        function calculateSchoolStats(app) {
            const singlesTotal = (app.first_male_singles || 0) + (app.first_female_singles || 0) + 
                               (app.second_male_singles || 0) + (app.second_female_singles || 0);
            const doublesTotal = (app.first_male_doubles || 0) + (app.first_female_doubles || 0) + 
                               (app.second_male_doubles || 0) + (app.second_female_doubles || 0);
            const totalPeople = singlesTotal + (doublesTotal * 2);
            
            return {
                singlesTotal,
                doublesTotal,
                totalPeople
            };
        }

        // ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === 'badminton2024') {
                isAdminMode = true;
                document.body.classList.add('admin-mode');
                document.getElementById('adminPassword').value = '';
                showMessage('‚úÖ ÁÆ°ÁêÜËÄÖ„Å®„Åó„Å¶„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„Åü„ÄÇÈ´òÂ∫¶„Å™Ê©üËÉΩ„Çí„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ', 'success');
                updateDashboard();
            } else {
                showMessage('‚ùå „Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ', 'error');
                document.getElementById('adminPassword').value = '';
            }
        }

        // CSVÂá∫ÂäõÔºàExcelÂØæÂøúÔºâ
        function exportCSV() {
            console.log('CSVÂá∫ÂäõÈñãÂßã');
            
            if (!isAdminMode) {
                showMessage('‚ùå ÁÆ°ÁêÜËÄÖÊ®©Èôê„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÂÖà„Å´„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'error');
                return;
            }
            
            if (applications.length === 0) {
                showMessage('‚ÑπÔ∏è „Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åô„Çã„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ', 'info');
                return;
            }

            const headers = [
                'Â≠¶Ê†°Âêç', 'ÊãÖÂΩìËÄÖÂêç', '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ',
                '1Âπ¥Áî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ', '1Âπ¥Áî∑Â≠ê„ÉÄ„Éñ„É´„Çπ', '1Âπ¥Â•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ', '1Âπ¥Â•≥Â≠ê„ÉÄ„Éñ„É´„Çπ',
                '2Âπ¥Áî∑Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ', '2Âπ¥Áî∑Â≠ê„ÉÄ„Éñ„É´„Çπ', '2Âπ¥Â•≥Â≠ê„Ç∑„É≥„Ç∞„É´„Çπ', '2Âπ¥Â•≥Â≠ê„ÉÄ„Éñ„É´„Çπ',
                'ÂêàË®àÂèÇÂä†ËÄÖÊï∞', 'Áî≥ËæºÊó•ÊôÇ'
            ];

            const csvData = applications.map(app => {
                const schoolStats = calculateSchoolStats(app);
                return [
                    app.schoolName,
                    app.teacherName,
                    app.email,
                    app.first_male_singles || 0,
                    app.first_male_doubles || 0,
                    app.first_female_singles || 0,
                    app.first_female_doubles || 0,
                    app.second_male_singles || 0,
                    app.second_male_doubles || 0,
                    app.second_female_singles || 0,
                    app.second_female_doubles || 0,
                    schoolStats.totalPeople,
                    new Date(app.timestamp).toLocaleString('ja-JP')
                ];
            });

            const csvContent = [headers, ...csvData]
                .map(row => row.map(field => `"${field}"`).join(','))
                .join('\n');

            // UTF-8 BOM‰ªò„Åç„ÅßExcelÂØæÂøú
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `badminton_survey_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showMessage('‚úÖ CSV„Éï„Ç°„Ç§„É´„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü„ÄÇExcel„ÅßÈñã„Åë„Åæ„Åôüìä', 'success');
        }

        // ÂÖ®„Éá„Éº„Çø„ÇØ„É™„Ç¢
        function clearAllData() {
            if (applications.length === 0) {
                showMessage('‚ÑπÔ∏è „ÇØ„É™„Ç¢„Åô„Çã„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ', 'info');
                return;
            }

            if (confirm('‚ö†Ô∏è Êú¨ÂΩì„Å´„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü\n„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                if (confirm('‚ö†Ô∏è ÊúÄÁµÇÁ¢∫Ë™ç\n„Åô„Åπ„Å¶„ÅÆÁî≥Ëæº„Åø„Éá„Éº„Çø„ÅåÂÆåÂÖ®„Å´ÂâäÈô§„Åï„Çå„Åæ„Åô„ÄÇ\nÁ∂öË°å„Åó„Åæ„Åô„ÅãÔºü')) {
                    applications = [];
                    localStorage.removeItem(STORAGE_KEY);
                    updateDashboard();
                    showMessage('‚úÖ „Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ', 'success');
                }
            }
        }

        // „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫ÔºàË¶ñË¶öÂäπÊûúÂº∑ÂåñÔºâ
        function showMessage(message, type = 'info') {
            // Êó¢Â≠ò„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂâäÈô§
            const existingMessage = document.querySelector('.message');
            if (existingMessage) {
                existingMessage.remove();
            }

            // Êñ∞„Åó„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏„Çí‰ΩúÊàê
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.innerHTML = message;

            // „É°„ÉÉ„Çª„Éº„Ç∏„ÇíÊåøÂÖ•
            const container = document.querySelector('.container');
            container.insertBefore(messageElement, container.children[1]);

            // 7ÁßíÂæå„Å´Ëá™ÂãïÂâäÈô§
            setTimeout(() => {
                if (messageElement.parentNode) {
                    messageElement.style.opacity = '0';
                    messageElement.style.transform = 'translateY(-20px)';
                    setTimeout(() => {
                        messageElement.remove();
                    }, 300);
                }
            }, 7000);

            // „É°„ÉÉ„Çª„Éº„Ç∏„Åæ„Åß„Çπ„É†„Éº„Ç∫„Çπ„ÇØ„É≠„Éº„É´
            messageElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // „Çπ„Éû„Éº„Éà„Éï„Ç©„É≥ÂØæÂøúÂº∑Âåñ
        function enhanceSmartphoneSupport() {
            // „Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„Éà„ÅÆÊîπÂñÑ
            document.querySelectorAll('.btn, .tab').forEach(element => {
                element.addEventListener('touchstart', function(e) {
                    this.style.opacity = '0.8';
                    this.style.transform = 'scale(0.98)';
                }, { passive: true });
                
                element.addEventListener('touchend', function(e) {
                    this.style.opacity = '1';
                    this.style.transform = 'scale(1)';
                }, { passive: true });
                
                element.addEventListener('touchcancel', function(e) {
                    this.style.opacity = '1';
                    this.style.transform = 'scale(1)';
                }, { passive: true });
            });

            // „Éï„Ç©„Éº„É†Ë¶ÅÁ¥†„ÅÆ„Éï„Ç©„Éº„Ç´„ÇπÊîπÂñÑ
            document.querySelectorAll('input, select').forEach(element => {
                element.addEventListener('focus', function() {
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
            });

            // „Éê„Éº„ÉÅ„É£„É´„Ç≠„Éº„Éú„Éº„ÉâÂØæÂøú
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                window.addEventListener('resize', function() {
                    if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'SELECT') {
                        setTimeout(() => {
                            document.activeElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }, 100);
                    }
                });
            }

            console.log('„Çπ„Éû„Éº„Éà„Éï„Ç©„É≥ÂØæÂøúÂº∑ÂåñÂÆå‰∫Ü');
        }

        // „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
        window.addEventListener('error', function(e) {
            console.error('JavaScript„Ç®„É©„Éº:', e.error);
            showMessage('‚ö†Ô∏è „Ç∑„Çπ„ÉÜ„É†„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'error');
        });

        window.addEventListener('unhandledrejection', function(e) {
            console.error('Êú™Âá¶ÁêÜPromiseÊãíÂê¶:', e.reason);
            showMessage('‚ö†Ô∏è „Ç∑„Çπ„ÉÜ„É†„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'error');
        });

        // „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊúÄÈÅ©Âåñ
        window.addEventListener('load', function() {
            console.log('üè∏ Êù±Ë•øÈ´òÊ†°ÁîüÈÅ∏Êäú„Éê„Éâ„Éü„É≥„Éà„É≥Â§ß‰ºö Âá∫Â†¥ËÄÖË™øÊüª„Ç∑„Çπ„ÉÜ„É† Ëµ∑ÂãïÂÆå‰∫Ü');
            console.log('üìä 8„Ç´„ÉÜ„Ç¥„É™„ÉºË©≥Á¥∞ÈõÜË®àÊ©üËÉΩÊê≠Ëºâ');
            console.log('üì± „Çπ„Éû„Éº„Éà„Éï„Ç©„É≥ÂÆåÂÖ®ÂØæÂøú');
            console.log('üîê ÁÆ°ÁêÜËÄÖÊ©üËÉΩ: „Éë„Çπ„ÉØ„Éº„Éâ badminton2024');
        });
    </script>
</body>
</html>
